$((function(){function e(e,t,n){document.getElementById(t).onclick=function(){e.guess(n,this)}}var t=0;function n(e,t,n){this.firstItem=e,this.choices=t,this.answer=n}function o(e){this.score=0,this.questions=e,this.questionIndex=0}n.prototype.isCorrectAnswer=function(e){return this.answer===e},o.prototype.getQuestionIndex=function(){return this.questions[this.questionIndex]},o.prototype.guess=function(e,t){if(this.getQuestionIndex().isCorrectAnswer(e)){this.score++;var n=0;return t.innerHTML+='<div class="quiz-icon text-green-400"><i class="fa fa-check"></i></div>',t.classList.add("right-choice"),null!==localStorage.getItem("currentQuestionNumber")?(n=parseInt(localStorage.getItem("currentQuestionNumber")),localStorage.setItem("currentQuestionNumber",++n)):firstItemIndex=localStorage.getItem("currentQuestionNumber"),void this.CountdownTimer(t)}t.innerHTML+='<div class="quiz-icon text-red-700"><i class="fa fa-times"></i></div>',t.classList.add("wrong-choice"),localStorage.setItem("QuizIsEnd",1),this.RestartQuiz(t)},o.prototype.isEnded=function(){return null!==localStorage.getItem("QuizIsEnd")&&1==localStorage.getItem("QuizIsEnd")},o.prototype.CountdownTimer=function(e){var t=4,n=document.createElement("div");e.appendChild(n);setInterval((function(){t--,n.innerHTML="<p>Câu hỏi tiếp theo sẽ xuất hiện trong "+t+"s</p>",1!=t||location.reload()}),1e3)},o.prototype.RestartQuiz=function(e){var t=4,n=document.createElement("div");e.appendChild(n);setInterval((function(){t--,n.innerHTML="<p>Bạn đã trả lời sai !!! "+t+"s</p>",1!=t||location.reload()}),1e3)},null!==document.getElementById("question")&&(performance.navigation.type==performance.navigation.TYPE_RELOAD&&document.getElementById("question").focus(),async function(e){const t=await fetch(e);return(await t.json()).result.data}("http://localhost:8080/vendors/quizz/quizz-data.json").then((function(e){var o=[],r=[],i=0;t=Object.keys(e).length,null===localStorage.getItem("currentQuestionNumber")?localStorage.setItem("currentQuestionNumber",0):localStorage.getItem("currentQuestionNumber")>=t?localStorage.setItem("QuizIsEnd",1):i=localStorage.getItem("currentQuestionNumber");var s=e[i];for(var u in null!=o&&r.push(s),delete e[i],e)"undefined"!==e[u]&&o.push(e[u]);const c=(a=o,l=3,result=a.slice(0,l).map((function(){return this.splice(Math.floor(Math.random()*this.length),1)[0]}),a.slice()),result);var a,l;return r.push(...c),r=function(e){let t,n=e.length;for(;0!=n;)t=Math.floor(Math.random()*n),n--,[e[n],e[t]]=[e[t],e[n]];return e}(r),[new n(s,r,s.id)]})).then((function(n){var r,i,s=new o(n);if(s.isEnded())i="<div class='p-5'>",i+="<h3 id='score' class='flex-auto text-5xl mb-5'> Your scores: <br/><div class='text-red-300 text-center'>"+localStorage.getItem("currentQuestionNumber")+"</div></h3>",i+="<div id='quizz-reset' class='mt-3 text-center sm:mt-0 py-2 px-8 bg-red-300 hover:bg-red-200 font-bold text-white rounded-lg shadow-md text-sm cursor-pointer'> Bắt đầu lại Quiz </div>",i+="</div>",document.getElementById("quiz").innerHTML=i,document.getElementById("quizz-reset").onclick=function(){localStorage.setItem("currentQuestionNumber",0),localStorage.setItem("QuizIsEnd",0),location.reload()};else{document.getElementById("question-desc"),document.getElementById("question").innerHTML=s.getQuestionIndex().firstItem.name;for(var u=s.getQuestionIndex().choices,c=0;c<u.length;c++)document.getElementById("choice"+c).innerHTML=u[c].image?'<img class="object-cover rounded-lg shadow border-2 border-solid border-white transition-all ease-in-out duration-300 cursor-pointer" src="'+u[c].image+'"/>':u[c].name,e(s,"btn"+c,u[c].id);r=localStorage.getItem("currentQuestionNumber"),document.getElementById("progress").innerHTML="Question "+r+" of "+t}})))}));