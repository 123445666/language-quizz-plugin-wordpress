(()=>{"use strict";function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function n(e,t,n,r,o,i,u){try{var s=e[i](u),a=s.value}catch(e){return void n(e)}s.done?t(a):Promise.resolve(a).then(r,o)}function r(e){return function(){var t=this,r=arguments;return new Promise((function(o,i){var u=e.apply(t,r);function s(e){n(u,o,i,s,a,"next",e)}function a(e){n(u,o,i,s,a,"throw",e)}s(void 0)}))}}$((function(){function t(e,t,n){document.getElementById(t).onclick=function(){e.guess(n,this)}}function n(){return(n=r(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r.result.data);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var o=0;function i(e,t,n){this.firstItem=e,this.choices=t,this.answer=n}function u(e){this.score=0,this.questions=e,this.questionIndex=0}i.prototype.isCorrectAnswer=function(e){return this.answer===e},u.prototype.getQuestionIndex=function(){return this.questions[this.questionIndex]},u.prototype.guess=function(e,t){if(this.getQuestionIndex().isCorrectAnswer(e)){this.score++;var n=0;return t.innerHTML+='<div class="quiz-icon text-green-400"><i class="fa fa-check"></i></div>',t.classList.add("right-choice"),null!==localStorage.getItem("currentQuestionNumber")?(n=parseInt(localStorage.getItem("currentQuestionNumber")),localStorage.setItem("currentQuestionNumber",++n)):firstItemIndex=localStorage.getItem("currentQuestionNumber"),void this.CountdownTimer(t)}t.innerHTML+='<div class="quiz-icon text-red-700"><i class="fa fa-times"></i></div>',t.classList.add("wrong-choice"),localStorage.setItem("QuizIsEnd",1),this.RestartQuiz(t)},u.prototype.isEnded=function(){return null!==localStorage.getItem("QuizIsEnd")&&1==localStorage.getItem("QuizIsEnd")},u.prototype.CountdownTimer=function(e){var t=4,n=document.createElement("div");e.appendChild(n);setInterval((function(){t--,n.innerHTML="<p>Câu hỏi tiếp theo sẽ xuất hiện trong "+t+"s</p>",1!=t||location.reload()}),1e3)},u.prototype.RestartQuiz=function(e){var t=4,n=document.createElement("div");e.appendChild(n);setInterval((function(){t--,n.innerHTML="<p>Bạn đã trả lời sai !!! "+t+"s</p>",1!=t||location.reload()}),1e3)},null!==document.getElementById("question")&&(performance.navigation.type==performance.navigation.TYPE_RELOAD&&document.getElementById("question").focus(),function(e){return n.apply(this,arguments)}("http://localhost:8080/vendors/quizz/quizz-data.json").then((function(t){var n,r=[],u=[],s=0;o=Object.keys(t).length,null===localStorage.getItem("currentQuestionNumber")?localStorage.setItem("currentQuestionNumber",0):localStorage.getItem("currentQuestionNumber")>=o?localStorage.setItem("QuizIsEnd",1):s=localStorage.getItem("currentQuestionNumber");var a=t[s];for(var c in null!=r&&u.push(a),delete t[s],t)"undefined"!==t[c]&&r.push(t[c]);var l,d,m=(l=r,d=3,result=l.slice(0,d).map((function(){return this.splice(Math.floor(Math.random()*this.length),1)[0]}),l.slice()),result);return(n=u).push.apply(n,e(m)),u=function(e){for(var t,n=e.length;0!=n;){t=Math.floor(Math.random()*n),n--;var r=[e[t],e[n]];e[n]=r[0],e[t]=r[1]}return e}(u),[new i(a,u,a.id)]})).then((function(e){var n,r=new u(e);if(r.isEnded())n="<div class='p-5'>",n+="<h3 id='score' class='flex-auto text-5xl mb-5'> Your scores: <br/><div class='text-red-300 text-center'>"+localStorage.getItem("currentQuestionNumber")+"</div></h3>",n+="<div id='quizz-reset' class='mt-3 text-center sm:mt-0 py-2 px-8 bg-red-300 hover:bg-red-200 font-bold text-white rounded-lg shadow-md text-sm cursor-pointer'> Bắt đầu lại Quiz </div>",n+="</div>",document.getElementById("quiz").innerHTML=n,document.getElementById("quizz-reset").onclick=function(){localStorage.setItem("currentQuestionNumber",0),localStorage.setItem("QuizIsEnd",0),location.reload()};else{document.getElementById("question-desc"),document.getElementById("question").innerHTML=r.getQuestionIndex().firstItem.name;for(var o=r.getQuestionIndex().choices,i=0;i<o.length;i++)document.getElementById("choice"+i).innerHTML=o[i].image?'<img class="object-cover rounded-lg shadow border-2 border-solid border-white transition-all ease-in-out duration-300 cursor-pointer" src="'+o[i].image+'"/>':o[i].name,t(r,"btn"+i,o[i].id)}})))}))})();